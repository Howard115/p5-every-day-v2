<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P5.js Sketch</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
</head>

<body>
    <script>
        // Function to get a random file from the p5_collection folder
        function getRandomSketch() {
            // Create a new XMLHttpRequest object
            const xhr = new XMLHttpRequest();
            // Open a synchronous GET request to the p5_collection folder
            xhr.open('GET', 'p5_collection/', false);
            // Send the request
            xhr.send(null);

            // Check if the request was successful
            if (xhr.status === 200) {
                // Create a new DOMParser
                const parser = new DOMParser();
                // Parse the response text as HTML
                const htmlDoc = parser.parseFromString(xhr.responseText, 'text/html');
                // Get all 'a' elements, extract their href attributes, and filter for .js files
                const files = Array.from(htmlDoc.querySelectorAll('a'))
                    .map(a => a.href)
                    .filter(href => href.endsWith('.js'));

                // If there are any .js files
                if (files.length > 0) {
                    // Generate a random index
                    const randomIndex = Math.floor(Math.random() * files.length);
                    // Return the filename of the randomly selected file
                    return files[randomIndex].split('/').pop();
                }
            }

            // Return null if no files were found or there was an error
            return null;
        }

        // Get a random sketch file
        const randomSketch = getRandomSketch();

        // If a random sketch was successfully retrieved
        if (randomSketch) {
            // Create a new script element
            const script = document.createElement('script');
            // Set the src attribute to the path of the random sketch file
            script.src = `p5_collection/${randomSketch}`;
            // Append the script element to the body
            document.body.appendChild(script);

            // Log the name of the current sketch to the console
            console.log(`Currently displaying: ${randomSketch}`);
        } else {
            // Log an error if no sketch files were found
            console.error('No sketch files found in p5_collection folder');
        }
    </script>





</body>

</html>